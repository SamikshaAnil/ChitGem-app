{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\samiksha wagrekar\\\\OneDrive\\\\Documents\\\\oct23 mern\\\\ChitGem-app\\\\frontend\\\\my-app\\\\src\\\\Components\\\\Customer\\\\CustomersForm.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { CustomersContext } from '../../Context/CustomersContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CustomersForm(props) {\n  _s();\n  const {\n    customers,\n    customerDispatch\n  } = useContext(CustomersContext);\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [mobile, setMobile] = useState('');\n  const [description, setDescription] = useState('');\n  const [customer, setCustomer] = useState({});\n  const {\n    editId\n  } = props;\n  console.log(editId);\n  useEffect(() => {\n    const customer = customers === null || customers === void 0 ? void 0 : customers.data.find(ele => ele._id == editId);\n    setCustomer(customer);\n    if (customer) {\n      var _customer$contact, _customer$contact2;\n      setName(customer.name || '');\n      setEmail(((_customer$contact = customer.contact) === null || _customer$contact === void 0 ? void 0 : _customer$contact.email) || '');\n      setMobile(((_customer$contact2 = customer.contact) === null || _customer$contact2 === void 0 ? void 0 : _customer$contact2.mobile) || '');\n      setDescription(customer.description || '');\n    } else {\n      setName('');\n      setEmail('');\n      setMobile('');\n      setDescription('');\n    }\n  }, [customers, editId]);\n\n  //     const [form,setForm] = useState(customer ? {\n  //         name : customer.name,\n  //         email : customer.contact.email,\n  //         mobile : customer.contact.mobile,\n  //         description : customer.description\n  //     } :{\n  //     name : '',\n  //     email : '',\n  //     mobile : '',\n  //     description : ''\n  //     }\n  //  )\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const formData = {\n      name: name,\n      contact: {\n        email: email,\n        mobile: mobile\n      },\n      description: description\n    };\n    try {\n      if (customer) {\n        const response = await axios.put(`http://localhost:3009/api/customers/${customer._id}`, formData, {\n          headers: {\n            Authorization: localStorage.getItem('token')\n          }\n        });\n        console.log(response.data);\n        customerDispatch({\n          type: 'UPDATE_CUSTOMERS',\n          payload: response.data\n        });\n        props.toggle();\n      } else {\n        const response = await axios.post('http://localhost:3009/api/customers', formData, {\n          headers: {\n            Authorization: localStorage.getItem('token')\n          }\n        });\n        console.log(response.data);\n        customerDispatch({\n          type: 'ADD_CUSTOMERS',\n          payload: response.data\n        });\n        setName('');\n        setEmail('');\n        setMobile('');\n        setDescription('');\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: \"name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: name,\n          onChange: e => setName(e.target.value),\n          className: \"form-control\",\n          name: \"name\",\n          id: \"name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          className: \"form-control\",\n          name: \"email\",\n          id: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"mobile\",\n          children: \"mobile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: mobile,\n          onChange: e => setMobile(e.target.value),\n          className: \"form-control\",\n          name: \"mobile\",\n          id: \"mobile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"description\",\n          children: \"description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          className: \"form-control\",\n          name: \"description\",\n          id: \"description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          className: \"btn btn-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n}\n_s(CustomersForm, \"2RFoP/7if57LseLjbPk6GxNsrFQ=\");\n_c = CustomersForm;\nvar _c;\n$RefreshReg$(_c, \"CustomersForm\");","map":{"version":3,"names":["useState","useEffect","useContext","axios","CustomersContext","jsxDEV","_jsxDEV","CustomersForm","props","_s","customers","customerDispatch","name","setName","email","setEmail","mobile","setMobile","description","setDescription","customer","setCustomer","editId","console","log","data","find","ele","_id","_customer$contact","_customer$contact2","contact","handleSubmit","e","preventDefault","formData","response","put","headers","Authorization","localStorage","getItem","type","payload","toggle","post","err","children","onSubmit","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","className","id","_c","$RefreshReg$"],"sources":["C:/Users/samiksha wagrekar/OneDrive/Documents/oct23 mern/ChitGem-app/frontend/my-app/src/Components/Customer/CustomersForm.js"],"sourcesContent":["import {useState,useEffect,useContext} from 'react'\r\nimport axios from 'axios'\r\nimport { CustomersContext } from '../../Context/CustomersContext'\r\nexport default function CustomersForm(props){\r\n    const {customers,customerDispatch} = useContext(CustomersContext)\r\n    const [name,setName] = useState('')\r\n    const [email,setEmail] = useState('')\r\n    const [mobile,setMobile] = useState('')\r\n    const [description,setDescription] = useState('')\r\n    const [customer,setCustomer] = useState({})\r\n    \r\n    \r\n\r\n    const {editId} = props\r\n    console.log(editId)\r\n\r\n    useEffect(()=>{\r\n        const customer = customers?.data.find(ele=>ele._id==editId)\r\n        setCustomer(customer)\r\n        if(customer){\r\n            setName(customer.name || '')\r\n            setEmail(customer.contact?.email || '')\r\n            setMobile(customer.contact?.mobile || '')\r\n            setDescription(customer.description || '')\r\n        }else{\r\n            setName('')\r\n            setEmail('')\r\n            setMobile('')\r\n            setDescription('')\r\n        }\r\n    },[customers,editId])\r\n\r\n//     const [form,setForm] = useState(customer ? {\r\n//         name : customer.name,\r\n//         email : customer.contact.email,\r\n//         mobile : customer.contact.mobile,\r\n//         description : customer.description\r\n//     } :{\r\n//     name : '',\r\n//     email : '',\r\n//     mobile : '',\r\n//     description : ''\r\n//     }\r\n//  )\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n\r\n        const formData = {\r\n            name : name,\r\n            contact: { \r\n            email:email,\r\n            mobile:mobile\r\n            },\r\n            description : description\r\n        }\r\n        try{\r\n            if(customer){\r\n                const response = await axios.put(`http://localhost:3009/api/customers/${customer._id}`,formData,{\r\n                    headers : {\r\n                        Authorization : localStorage.getItem('token')\r\n                    }\r\n                })\r\n                console.log(response.data)\r\n                customerDispatch({type:'UPDATE_CUSTOMERS', payload : response.data})\r\n                props.toggle()\r\n\r\n            }else{\r\n            const response = await axios.post('http://localhost:3009/api/customers',formData,{\r\n                headers : {\r\n                    Authorization : localStorage.getItem('token')\r\n                }\r\n            })\r\n            console.log(response.data)\r\n            customerDispatch({type:'ADD_CUSTOMERS', payload: response.data})\r\n            setName('')\r\n            setEmail('')\r\n            setMobile('')\r\n            setDescription('')\r\n        }\r\n    }\r\n        catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n    return(\r\n        <div>\r\n            <form onSubmit = {handleSubmit}>\r\n                <div>\r\n                <label htmlFor=\"name\">name</label>\r\n                <input type = \"text\"\r\n                value = {name}\r\n                onChange={(e)=>setName(e.target.value)}\r\n                className='form-control'\r\n                name = 'name'\r\n                id = 'name'\r\n                />\r\n                </div>\r\n                <div>\r\n                <label htmlFor=\"email\">email</label>\r\n                <input type = \"email\"\r\n                value = {email}\r\n                onChange={(e)=>setEmail(e.target.value)}\r\n                className='form-control'\r\n                name = 'email'\r\n                id = 'email'\r\n                />  \r\n                </div>\r\n                <div>\r\n                <label htmlFor=\"mobile\">mobile</label>\r\n                <input type = \"text\"\r\n                value = {mobile}\r\n                onChange={(e)=>setMobile(e.target.value)}\r\n                className='form-control'\r\n                name = 'mobile'\r\n                id = 'mobile'\r\n                />  \r\n                </div>\r\n                <div>\r\n                <label htmlFor=\"description\">description</label>\r\n                <input type = \"text\"\r\n                value = {description}\r\n                onChange= {(e)=>setDescription(e.target.value)}\r\n                className='form-control'\r\n                name = 'description'\r\n                id = 'description'\r\n                />  \r\n                </div>\r\n                <div>\r\n                <input type = 'submit' className='btn btn-primary'/>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}