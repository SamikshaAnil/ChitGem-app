{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vigne\\\\OneDrive\\\\Desktop\\\\portfolio chit-Gem\\\\ChitGem-app\\\\frontend\\\\my-app\\\\src\\\\Components\\\\paments\\\\success.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport Swal from 'sweetalert2';\nimport { startUpdateInvoice } from \"../Actions/ChitPayment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Succes() {\n  _s();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const stripId = localStorage.getItem('stripId');\n  console.log(stripId);\n  const handleSuccess = () => {\n    Swal.fire({\n      icon: 'success',\n      title: 'Payment Successful!',\n      text: 'Thank you for your payment.',\n      confirmButtonText: 'OK',\n      confirmButtonColor: '#28a745',\n      customClass: {\n        icon: 'green-icon'\n      }\n    }).then(result => {\n      if (result) {\n        navigate('/invoice');\n      }\n    });\n  };\n  useEffect(() => {\n    (async () => {\n      try {\n        const response = await axios.put(`http://localhost:3009/api/payments/status/update/${stripId}`);\n        console.log('response from stripe put request', response.data);\n        if (response) {\n          handleSuccess();\n        }\n        const invoiceId = response.data.invoiceId;\n        console.log(invoiceId);\n        dispatch(startUpdateInvoice(invoiceId));\n\n        // dispatch(startPaymentStatusSuccess(transactionId,navigate))\n        // const updatedBooking=await axios.put(`http://localhost:3045/api/booking/payment/update/${bookingId}`)\n        // console.log(\"update\",updatedBooking.data)\n      } catch (err) {\n        console.log(err);\n      }\n    })();\n  }, []);\n  console.log(stripId);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      paddingTop: '80px'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"payment is succes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n}\n_s(Succes, \"C8M3Qnh2JtuXRaZXcPUyNRrk+zo=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n_c = Succes;\nvar _c;\n$RefreshReg$(_c, \"Succes\");","map":{"version":3,"names":["axios","useEffect","useDispatch","useNavigate","Swal","startUpdateInvoice","jsxDEV","_jsxDEV","Succes","_s","navigate","dispatch","stripId","localStorage","getItem","console","log","handleSuccess","fire","icon","title","text","confirmButtonText","confirmButtonColor","customClass","then","result","response","put","data","invoiceId","err","style","paddingTop","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/vigne/OneDrive/Desktop/portfolio chit-Gem/ChitGem-app/frontend/my-app/src/Components/paments/success.js"],"sourcesContent":["import axios from \"axios\"\r\nimport { useEffect } from \"react\"\r\nimport { useDispatch} from \"react-redux\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport Swal from 'sweetalert2'\r\nimport { startUpdateInvoice } from \"../Actions/ChitPayment\"\r\nexport default function Succes(){\r\n    const navigate=useNavigate()\r\n    const dispatch=useDispatch()\r\n    const stripId = localStorage.getItem('stripId')\r\n    console.log(stripId)\r\n    const handleSuccess = () => {\r\n        Swal.fire({\r\n            icon: 'success',\r\n            title: 'Payment Successful!',\r\n            text: 'Thank you for your payment.',\r\n            confirmButtonText: 'OK',\r\n            confirmButtonColor: '#28a745',\r\n            customClass: {\r\n                icon: 'green-icon',\r\n            }\r\n        }).then((result) => {\r\n            if (result) {\r\n                navigate('/invoice')\r\n            }\r\n        });\r\n    }\r\n    \r\n    useEffect(()=>{\r\n        (async()=>{\r\n           try{\r\n            const response= await axios.put(`http://localhost:3009/api/payments/status/update/${stripId}`)\r\n            console.log('response from stripe put request',response.data)\r\n            if(response){\r\n                handleSuccess()\r\n            }\r\n            const invoiceId=response.data.invoiceId\r\n            console.log(invoiceId)\r\n            dispatch(startUpdateInvoice(invoiceId))\r\n            \r\n            // dispatch(startPaymentStatusSuccess(transactionId,navigate))\r\n           // const updatedBooking=await axios.put(`http://localhost:3045/api/booking/payment/update/${bookingId}`)\r\n            // console.log(\"update\",updatedBooking.data)\r\n           }catch(err){\r\n            console.log(err)\r\n           }\r\n        })();\r\n    },[])\r\n    console.log(stripId)\r\n\r\n    return (\r\n        <div style={{ paddingTop: '80px' }}>\r\n            <h1>payment is succes</h1>\r\n        </div>\r\n    )\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAO,aAAa;AACxC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,IAAI,MAAM,aAAa;AAC9B,SAASC,kBAAkB,QAAQ,wBAAwB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAC3D,eAAe,SAASC,MAAMA,CAAA,EAAE;EAAAC,EAAA;EAC5B,MAAMC,QAAQ,GAACP,WAAW,CAAC,CAAC;EAC5B,MAAMQ,QAAQ,GAACT,WAAW,CAAC,CAAC;EAC5B,MAAMU,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC;EAC/CC,OAAO,CAACC,GAAG,CAACJ,OAAO,CAAC;EACpB,MAAMK,aAAa,GAAGA,CAAA,KAAM;IACxBb,IAAI,CAACc,IAAI,CAAC;MACNC,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,qBAAqB;MAC5BC,IAAI,EAAE,6BAA6B;MACnCC,iBAAiB,EAAE,IAAI;MACvBC,kBAAkB,EAAE,SAAS;MAC7BC,WAAW,EAAE;QACTL,IAAI,EAAE;MACV;IACJ,CAAC,CAAC,CAACM,IAAI,CAAEC,MAAM,IAAK;MAChB,IAAIA,MAAM,EAAE;QACRhB,QAAQ,CAAC,UAAU,CAAC;MACxB;IACJ,CAAC,CAAC;EACN,CAAC;EAEDT,SAAS,CAAC,MAAI;IACV,CAAC,YAAS;MACP,IAAG;QACF,MAAM0B,QAAQ,GAAE,MAAM3B,KAAK,CAAC4B,GAAG,CAAE,oDAAmDhB,OAAQ,EAAC,CAAC;QAC9FG,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAACW,QAAQ,CAACE,IAAI,CAAC;QAC7D,IAAGF,QAAQ,EAAC;UACRV,aAAa,CAAC,CAAC;QACnB;QACA,MAAMa,SAAS,GAACH,QAAQ,CAACE,IAAI,CAACC,SAAS;QACvCf,OAAO,CAACC,GAAG,CAACc,SAAS,CAAC;QACtBnB,QAAQ,CAACN,kBAAkB,CAACyB,SAAS,CAAC,CAAC;;QAEvC;QACD;QACC;MACD,CAAC,QAAMC,GAAG,EAAC;QACVhB,OAAO,CAACC,GAAG,CAACe,GAAG,CAAC;MACjB;IACH,CAAC,EAAE,CAAC;EACR,CAAC,EAAC,EAAE,CAAC;EACLhB,OAAO,CAACC,GAAG,CAACJ,OAAO,CAAC;EAEpB,oBACIL,OAAA;IAAKyB,KAAK,EAAE;MAAEC,UAAU,EAAE;IAAO,CAAE;IAAAC,QAAA,eAC/B3B,OAAA;MAAA2B,QAAA,EAAI;IAAiB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACzB,CAAC;AAEd;AAAC7B,EAAA,CAjDuBD,MAAM;EAAA,QACXL,WAAW,EACXD,WAAW;AAAA;AAAAqC,EAAA,GAFN/B,MAAM;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}